#!/bin/sh
# .git/hooks/commit-msg

# Enforce Conventional Commits
# Format: <type>(<scope>): <subject>

echo "üìù Quantum Diamond Forge: Commit Message Check"

commit_msg_file=$1
commit_msg=$(cat "$commit_msg_file")

# Regex for Conventional Commits
pattern="^(feat|fix|docs|style|refactor|perf|test|chore|ci|build|revert)(\(.+\))?: .+"

if ! echo "$commit_msg" | grep -qE "$pattern"; then
    echo "‚ùå Error: Invalid commit message format."
    echo "   Expected: <type>(<scope>): <subject>"
    echo "   Example: feat(auth): add login endpoint"
    echo "   Types: feat, fix, docs, style, refactor, perf, test, chore"
    exit 1
fi

echo "‚úÖ Commit message format valid."
